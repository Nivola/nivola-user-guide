.. _howto-secgroupcli:

Lavorare con i Security Group dalla CLI:
=========================================

E' possibile gestire il ciclo di vita dei Security, dalla CLI, attraverso le funzioni. 

-  :ref:`Elenco`
-  :ref:`Create`
-  :ref:`Delete`
-  :ref:`Aggiungere`
-  :ref:`Eliminare`
-  :ref:`Add-rule`
-  :ref:`Delete-rule`
-  :ref:`Lista-template`
-  :ref:`Manage`

.. _Elenco:

Ottenere Elenco dei Security Group
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

La lista dei SG, è fornita dal sistema, a sfruttando il comando:


.. code-block:: bash

    $ beehive bu netaas securitygroups list

     
      Parametri Opzionali:

        -h, --help          show this help message and exit
        -y                  Force delete
        -e ENV, --env ENV   Execution environment
        -f FORMAT           Output format
        -k KEY, --key KEY   Secret key file to use for encryption/decryption
        --vault VAULT       Ansible vault password to use for inventory decryption
        --time              Print command execution time
        --notruncate        Disable truncate of output
        --curl              Print api requst as curl command in console log
        -accounts ACCOUNTS  list of account id comma separated
        -ids IDS            list of security group id comma separated
        -vpcs VPCS          list of vpc id comma separated
        -tags TAGS          list of tag comma separated
        -page PAGE          list page [default=0]
        -size SIZE          list page size [default=20]


.. _Create:

Creare un Security Group
^^^^^^^^^^^^^^^^^^^^^^^^^

La creazione di un Security Group, avviene attraverso la seguente istruzione:


.. code-block:: bash

    $ beehive bu netaas securitygroups add <SG name> <Vpc Id> <Template Id>

     
      Parametri Obbigatori:

         SG name               Nome da attribuire all'oggetto.
         Vpc Id                Id del Vpc.
         Template Id           Id del template da utilizzare.

      Parametri Opzionali:

        -h, --help          show this help message and exit
        -y                  Force delete
        -e ENV, --env ENV   Execution environment
        -f FORMAT           Output format
        -k KEY, --key KEY   Secret key file to use for encryption/decryption
        --vault VAULT       Ansible vault password to use for inventory decryption
        --time              Print command execution time
        --notruncate        Disable truncate of output
        --curl              Print api requst as curl command in console log


.. _Delete:

Cancellare un Security Group
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Per cancellare un Security Group, occorre usare il comando:

.. code-block:: bash

    $ beehive bu netaas securitygroups delete <SG Id>

    
      Parametri Obbigatori:

         SG Id               Id del Security Group 

      Parametri Opzionali:

        -h, --help          show this help message and exit
        -y                  Force delete
        -e ENV, --env ENV   Execution environment
        -f FORMAT           Output format
        -k KEY, --key KEY   Secret key file to use for encryption/decryption
        --vault VAULT       Ansible vault password to use for inventory decryption
        --time              Print command execution time
        --notruncate        Disable truncate of output
        --curl              Print api requst as curl command in console log


.. _Aggiungere:

Aggiungere regole ad un Security Group
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Aggiungere regole di ingresso e di uscita ad un Security Group, è possibile utilizzando l'istruzione:

.. code-block:: bash

    $ beehive bu netaas securitygroups add-rule  <Tipo ><SG Id>

    
      Parametri Obbigatori:

         Tipo               Identifica se la regola eè di ingresso "ingress" o uscita "egress".
         Sg id              Id del Security Group 

      Parametri Opzionali:

        -h, --help          show this help message and exit
        -y                  Force delete
        -e ENV, --env ENV   Execution environment
        -f FORMAT           Output format
        -k KEY, --key KEY   Secret key file to use for encryption/decryption
        --vault VAULT       Ansible vault password to use for inventory decryption
        --time              Print command execution time
        --notruncate        Disable truncate of output
        --curl              Print api requst as curl command in console log

.. _Eliminare:

Eliminare una regola da un Security Group
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Per cancellare una regola da un *SG*, serve il comando:

.. code-block:: bash

    $ beehive bu netaas securitygroups add-rule  <Tipo ><SG Id>

    
      Parametri Obbigatori:

         Tipo               Identifica se la regola eè di ingresso "ingress" o uscita "egress".
         Sg id              Id del Security Group 

      Parametri Opzionali:

        -h, --help          show this help message and exit
        -y                  Force delete
        -e ENV, --env ENV   Execution environment
        -f FORMAT           Output format
        -k KEY, --key KEY   Secret key file to use for encryption/decryption
        --vault VAULT       Ansible vault password to use for inventory decryption
        --time              Print command execution time
        --notruncate        Disable truncate of output
        --curl              Print api requst as curl command in console log
        -proto PROTO        protocol. can be tcp, udp, icmp or -1 for all
        -port PORT          can be an integer between 0 and 65535 or a range with
                            start and end in the same interval. Range format is
                            <start>-<end>. Use -1 for all ports
        -dest DEST          rule destination. Syntax <type>:<value>. Destination type
                            can be SG, CIDR. For SG value must be <sg_id>. For CIDR
                            value should like 10.102.167.0/24.
        -source SOURCE      rule source. Syntax <type>:<value>. Source type can be
                            SG, CIDR. For SG value must be <sg_id>. For CIDR value
                            should like 10.102.167.0/24.

